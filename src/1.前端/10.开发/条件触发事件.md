---
title: 条件触发事件的解决方案
author: 李嘉明
createTime: 2024/06/20 20:32:08
permalink: /article/ocwdz8qb/
tags:
  - javascript
---



## 前言

在日常工作中，我们在浏览器中，触发下浏览器原生事件，或者自定义事件， 但是如果条件不满足，就不在执行条件，就比如 `mouseenter` 鼠标移动到节点上时会立即触发事件，但是 如果鼠标在节点上停留的时间 太短，我们就不应该去触发对应的事件。这样我们用户体验非常不好，如何解决，有以下几种方案。



### 方法一：setTimeout 定时器拦截

我们在触发事件 中 使用 `setTimeout` 设置 在 3 秒后触发我们定时器的逻辑，一但用户 立马离开，或者 条件瞬间不满足。我们就应该把定时器销毁


:::normal-demo

```css
.outer {
  width: 100px;
  height: 100px;
  background-color: pink;
  font-size:16px;
  color: #333;
}
```

```html
<div class="outer"></div>
```
```js

let timeId = null
const outer = document.querySelector('.outer')
outer.addEventListener('mouseenter', (ev) => {
    outer.textContent = '开启定时器'
    timeId = setTimeout(() => {
        window.alert('触发逻辑')
    }, 3000)
});

outer.addEventListener('mouseleave', (ev) => {
    if(timeId) {
        outer.textContent = '销毁定时器'
        clearTimeout(timeId)
    }
});
```
:::